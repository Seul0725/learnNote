<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script>
		var cates = [ 
			{
				id: 1,
				name: '根编目',
				cate_path: null
			},
			{
				id: 2,
				name: 'Java课程',
				cate_path: '1.2'
			},
			{
				id: 3,
				name: 'Spring课程',
				cate_path: '1.2.3'
			},
			{
				id: 6,
				name: 'Servlet课程',
				cate_path: '1.2.6'
			},
			{
				id: 4,
				name: 'SpringBoot课程',
				cate_path: '1.2.3.4'
			},
			{
				id: 5,
				name: 'Web课程',
				cate_path: '1.5'
			},
			{
				id: 7,
				name: 'React课程',
				cate_path: '1.5.7'
			},
			{
				id: 8,
				name: 'redux课程',
				cate_path: '1.5.7.8'
			},{
				id:9,
				name:'HTML课程',
				cate_path:'1.5.9'
			},{
				id:10,
				name:'HTML课程API',
				cate_path:'1.5.9,10'
			},{
				id:11,
				name:'Python课程',
				cate_path:'1.11'
			},{
				id:12,
				name:'DjDo课程',
				cate_path:'1.11.12'
			}
		];
		cates = cates.filter(function(item){
			return item.cate_path;
		});
		//父编目下有一个孩子编目的数组
		//给每一个编目对象中添加属性childs:[]，以及父编目的id属性
		//找到当前的编目对象，获取它的父编目id,通过父编目id，找到父编目对象。将当前的编目对象放在父编目的childs数组中
		//1.添加parent_id属性以及childs属性
		cates.forEach(function(item){
			item.childs = [];
			var parentsArr = item.cate_path.split('.');
			var parentId = parentsArr[parentsArr.length-2];
			item.parent_id = +parentId;
		});
		//2.将子编目放到父编目对象中的childs数组中
		cates.forEach(function(item){
			var parents = cates.filter(function(pItem){
				return item.parent_id === pItem.id;
			});
			if(parents.length>0){
				parents[0].childs.push(item);
			}
		});
		//3.过滤获取一级编目对象
		var result = cates.filter(function(item){
			return item.cate_path.split('.').length==2;
		});
		console.log(result);
	</script>
</head>
<body>
	
</body>
</html>